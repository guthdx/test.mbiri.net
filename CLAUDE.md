# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

The MBIRI Research Dissemination Hub is a static website that hosts accessible research summaries, original academic papers, and interactive health tools. Content is generated via the [Science Simplifier Tool](https://github.com/guthdx/science-simplifier-tool) and manually deployed here.

## Site Architecture

### Pure Static Site
- **No build process**: Direct HTML/CSS/JavaScript files
- **No framework**: Vanilla web technologies only
- **Embedded CSS**: All styles in `<style>` tags within HTML files (no external CSS files)
- **CDN dependencies**: D3.js and Chart.js loaded via CDN for interactive features

### Content Types

1. **Landing Pages**
   - `index_mbiri.html` - Main entry point with two-column layout
   - `index_mbiri_annual.html` - Annual meeting variant
   - `annual_meeting_papers.html` - List of annual presentations

2. **Research Summaries** (34+ HTML files)
   - COVID-19 studies: `C4R_*.html` (9 files)
   - Strong Heart Family Study: `SHFS_*.html`, `heart_health_pregnancy.html`, `le_8_*.html`
   - Environmental health: `uranium_groundwater_summary.html`, `mercurystudy.html`
   - Named pattern: kebab-case or PascalCase depending on origin

3. **Interactive Tools**
   - `essential_8_calc.html` - Heart health calculator with forms and JavaScript
   - `community-health-dashboard.html` - Data visualization with D3.js/Chart.js

4. **Original Papers** (`original_papers/`)
   - 25+ peer-reviewed PDFs
   - `word_backups/` - Source DOCX files
   - `sst_uploads/` - Papers uploaded via Science Simplifier Tool (auto-deployed)

5. **Annual Meeting Content** (`annual_meeting/`)
   - 12 simplified HTML summaries from conference presentations
   - Minimal styling, links to PDFs in `../original_papers/`

### File Organization

```
/var/www/test.mbiri.net/html/
├── *.html                      - Landing pages and research summaries (root level)
├── original_papers/            - Research papers (PDFs)
│   ├── *.pdf                   - Curated papers (25+)
│   ├── word_backups/*.docx     - Source manuscripts
│   └── sst_uploads/            - Auto-deployed uploads from sst.mbiri.net
├── annual_meeting/*.html       - Conference presentation summaries
├── *.png                       - Institution logos (6 files)
└── *.zip                       - Downloadable paper collections
```

## Content Workflow Integration

This repository is the **output destination** for content generated by the Science Simplifier Tool:

```
sst.mbiri.net → Generate simplified HTML → SCP deploy → test.mbiri.net
```

### Adding New Research Summaries

1. **Generate content** at https://sst.mbiri.net:
   - Upload research paper (PDF/TXT)
   - Download generated HTML output

2. **Deploy to this site**:
   ```bash
   # Simplified HTML (manual SCP required)
   scp simplified_*.html user@server:/var/www/test.mbiri.net/html/

   # Original paper (automatically deployed by SST to original_papers/sst_uploads/)
   ```

3. **Update index** (if needed):
   - Add link to new summary in `index_mbiri.html` or appropriate landing page

4. **Commit to git**:
   ```bash
   cd /var/www/test.mbiri.net/html
   git add .
   git commit -m "Add research summary: [title]"
   git push
   ```

### Original Papers: Two Sources

- **Curated papers**: `/original_papers/*.pdf` - Manually added, version-controlled
- **SST uploads**: `/original_papers/sst_uploads/*.pdf` - Auto-deployed from sst.mbiri.net, not version-controlled (large files)

## Styling Conventions

### CSS Architecture
All pages use embedded CSS with consistent patterns:

- **CSS Variables**: Root-level variables for theming (`--primary: #0077cc`, `--secondary`, `--accent`, `--dark`)
- **Layout**: CSS Grid for multi-column layouts, Flexbox for component alignment
- **Responsive**: Mobile-first with `@media (max-width: 768px)` breakpoints
- **Typography**: Arial sans-serif, 1.6 line-height for readability
- **Colors**: Blue primary (#0077cc), white backgrounds, subtle shadows

### HTML Patterns
- Semantic HTML5 structure
- Line numbering in code examples using `cat -n` format
- Links to original papers: `<a href="original_papers/filename.pdf">View Original Paper</a>`
- Logo footer with three institutional partners

## Interactive Tools Implementation

### Heart Health Calculator (`essential_8_calc.html`)
- Pure JavaScript form validation and calculation
- No external libraries
- Calculates AHA Life's Essential 8 score
- Client-side only, no backend required

### Community Dashboard (`community-health-dashboard.html`)
- D3.js v7.8.5 for data visualization
- Chart.js v3.9.1 for charts
- Sample data embedded in JavaScript
- Responsive SVG graphics

## Git Workflow

### Branch Structure
- **main** branch only (renamed from master)
- Direct commits to main for content updates

### File Tracking
- `.gitignore` excludes:
  - `.DS_Store`, editor files (`.swp`, `.vscode/`)
  - Temporary files
- Large PDFs in `sst_uploads/` should not be committed (consider `.gitignore` update)

### Commit Conventions
Use descriptive messages:
```bash
git commit -m "Add COVID-19 recovery study summary"
git commit -m "Update annual meeting papers with 2025 presentations"
git commit -m "Fix broken link in cardiovascular health summary"
```

## Deployment

### Web Server Setup
Static file hosting via Nginx or Apache. No special configuration needed beyond serving HTML files.

```nginx
# Example Nginx config
server {
    listen 80;
    server_name test.mbiri.net;
    root /var/www/test.mbiri.net/html;
    index index_mbiri.html;
}
```

### File Permissions
Ensure web server can read files:
```bash
sudo chown -R www-data:www-data /var/www/test.mbiri.net/html
sudo chmod -R 755 /var/www/test.mbiri.net/html
```

## Content Guidelines

### Research Summaries Structure
Generated HTML files typically contain:
1. **Community Summary** - 6th grade reading level
2. **Blog Post Drafts** - 3 variations for engagement
3. **Social Media Posts** - Facebook-ready content
4. **Video Script** - 3-5 minute YouTube format
5. **Main Findings** - 8th grade reading level
6. **Practical Applications** - Stakeholder-specific guidance

All include:
- Link to original paper
- Proper attribution
- Timestamp metadata

### Naming Conventions
- **Research summaries**: Use kebab-case or PascalCase (e.g., `C4R_StudyDesign.html`, `uranium-groundwater-summary.html`)
- **Original papers**: Use author-led naming (e.g., `Fretts_A_528_Sphingolipids_Diabetes_SHS.pdf`)
- **SST uploads**: UUID-prefixed (e.g., `a1b2c3d4_paper_name.pdf`)

## Maintenance Tasks

### Regular Updates
```bash
# Add new research summary
cd /var/www/test.mbiri.net/html
cp ~/Downloads/simplified_new_study.html .
git add simplified_new_study.html
git commit -m "Add new study summary: [title]"
git push

# Update index page with new link
vim index_mbiri.html  # Add link to new summary
git add index_mbiri.html
git commit -m "Update index with new study link"
git push
```

### Cleanup Old Files
```bash
# Check for broken PDF links
grep -r "href=\"original_papers/" *.html | cut -d: -f2 | grep -o 'original_papers/[^"]*' | sort -u | while read f; do
  [ ! -f "$f" ] && echo "Missing: $f"
done

# Remove old SST uploads (if disk space needed)
find original_papers/sst_uploads -type f -mtime +90 -ls
# Manual deletion recommended after review
```

## Related Projects

- **Science Simplifier Tool**: https://github.com/guthdx/science-simplifier-tool
  - Flask application that generates the simplified HTML content
  - Deployed at https://sst.mbiri.net
  - Automatically deploys original papers to this site's `original_papers/sst_uploads/`

## Institutional Partners

Content represents research from:
- Missouri Breaks Indian Health Improvement Research Initiative (MBIRI)
- National Heart, Lung, and Blood Institute (NHLBI)
- Strong Heart Study

Logos displayed in footer: `mbiri_logo.png`, `nhlbi_logo.png`, `shs_heart_logo.png`
